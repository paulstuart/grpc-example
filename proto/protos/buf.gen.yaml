version: v1
plugins:
  # Generate Go code with protoc-gen-go
  - name: go
    out: ../pkg
    opt:
      - paths=source_relative
  # Generate Go gRPC code
  - name: go-grpc
    out: ../pkg
    opt:
      - paths=source_relative
  # Generate gRPC-Gateway code
  - name: grpc-gateway
    out: ../pkg
    opt:
      - paths=source_relative
      - generate_unbound_methods=true
  # Generate OpenAPI v2 (Swagger) spec
  - name: openapiv2
    out: ../../third_party/OpenAPI
    opt:
      - allow_merge=true
      - merge_file_name=example
